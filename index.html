<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lunar Base Project</title>
    <style>
        :root {
            --container-width: 800px;
        }
        body {
            background-color: #000;
            color: #fff;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }
        .banner {
            background-color: #333;
            padding: 0px;
            width: 100%;
            position: fixed;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .banner-content {
            width: 90%;
            max-width: var(--container-width);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .dropdown {
            position: relative;
            display: inline-block;
        }
        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #444;
            min-width: 200px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1;
            right: 0;
            max-height: 80vh;
            overflow-y: auto;
        }
        .dropdown-content a {
            color: white;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }
        .dropdown-content a:hover {
            background-color: #555;
        }
        .dropdown:hover .dropdown-content {
            display: block;
        }
        .content {
            padding: 20px;
            background-color: #222;
            width: 90%;
            max-width: var(--container-width);
            margin: 120px auto 20px auto;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
        }
        .content img {
            width: 100%;
            height: auto;
        }
        .dropbtn {
            background: url('dropdown.png') no-repeat center;
            background-size: contain;
            border: none;
            cursor: pointer;
            height: 40px;
            width: 40px;
            aria-label: "Dropdown menu button";
        }
        .footer {
            background-color: #333;
            padding: 10px;
            width: 100%;
            position: fixed;
            bottom: 0;
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .footer button {
            background-color: #444;
            border: none;
            color: #fff;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 18px;
        }
        .footer button:hover {
            background-color: #555;
        }
        .footer button:disabled {
            background-color: #666;
            cursor: not-allowed;
        }
        .divider {
            height: 1px;
            background-color: #555;
            margin: 8px 0;
        }
    </style>
    <script>
        // List of files with titles and corresponding file paths
        const files = [
            { title: "Introduction", file: "content/introduction.html" },
            { title: "Economical Factors", file: "content/introduction_economical_factors.html" },
            { title: "Goals", file: "content/goals.html" },
            { title: "Population Size", file: "content/population_size.html" },
            { title: "Civilian Research", file: "content/use_cases_civilian-research.html" },
            { title: "Civilian Resources", file: "content/use_cases_civilian-resources.html" },
            { title: "Civilian Health Tourism", file: "content/use_cases_civilian-health_tourism.html" },
            { title: "Civilian Stepping Stone", file: "content/use_cases_civilian-stepping_stone.html" },
            { title: "Defence", file: "content/use_cases_defence.html" },
            { title: "Architectural Concept", file: "content/architectural_concept.html" },
            { title: "General Layout", file: "content/habitat_layout.html" },
            { title: "Modules", file: "content/habitat_modules.html" },
            { title: "Materials", file: "content/habitat_materials.html" },
            { title: "Inflatable Habitat", file: "content/inflatable_habitat.html" },
            { title: "Water Storage and Treatment", file: "content/water_storage_treatment.html" },
            { title: "Control and Monitoring", file: "content/control_monitoring.html" },
            { title: "Surface Supply Logistics", file: "content/surface_supply_logistics.html" },
            { title: "Mental Health and Wellbeing", file: "content/mental_health_wellbeing.html" },
            { title: "Long Term Self Sufficiency", file: "content/long_term_self_sufficiency.html" },
            { title: "Governance and Management", file: "content/governance_management.html" },
            { title: "Safety and Redundancy", file: "content/safety_redundancy.html" },
            { title: "Environmental Control", file: "content/environmental_control.html" },
            { title: "List of Disruptive Technologies", file: "content/list_of_disruptive_technologies.html" },
            { title: "Summary", file: "content/summary.html" }
        ];

        // Function to load content into the page
        function loadContent(contentHTML) {
            document.getElementById('content').innerHTML = contentHTML;
            document.title = 'Lunar Base Project';
            window.scrollTo(0, 0); // Scroll to the top of the page
        }

        document.addEventListener('DOMContentLoaded', () => {
            const dropdownContent = document.querySelector('.dropdown-content');

            // Generate dropdown menu links
            files.forEach((item, index) => {
                const link = document.createElement('a');
                link.href = '#';
                link.textContent = item.title;
                link.setAttribute('aria-label', item.title);
                link.onclick = () => {
                    // Fetch and load the content when a link is clicked
                    fetch(item.file)
                        .then(response => {
                            if (!response.ok) {
                                throw new Error('Network response was not ok ' + response.statusText);
                            }
                            return response.text();
                        })
                        .then(data => {
                            loadContent(data);
                            updateFooterLinks(index);
                        })
                        .catch(error => {
                            console.error('Error loading content:', error);
                            alert('An error occurred while loading the content. Please try again later.');
                        });

                    return false; // Prevent default link behavior
                };

                dropdownContent.appendChild(link);

                // Add dividers between certain sections
                if (index === 3 || index === 8 || index === 13 || index === 21) {
                    const divider = document.createElement('div');
                    divider.className = 'divider';
                    dropdownContent.appendChild(divider);
                }
            });

            // Load Introduction by default on page load
            fetch(files[0].file)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok ' + response.statusText);
                    }
                    return response.text();
                })
                .then(data => {
                    loadContent(data);
                    updateFooterLinks(0);
                })
                .catch(error => {
                    console.error('Error loading content:', error);
                    alert('An error occurred while loading the initial content. Please try again later.');
                });
        });

        // Update the state of the footer navigation buttons
        function updateFooterLinks(currentIndex) {
            const prevButton = document.getElementById('prev-chapter');
            const nextButton = document.getElementById('next-chapter');

            // Check if an index corresponds to a divider
            function isDivider(index) {
                const element = document.querySelector(`.dropdown-content a:nth-child(${index + 1})`);
                return element && element.classList.contains('divider');
            }

            // Functionality for the previous chapter button
            prevButton.onclick = () => {
                let newIndex = currentIndex - 1;
                while (newIndex >= 0 && (isDivider(newIndex) || newIndex < 0)) {
                    newIndex--;
                }
                if (newIndex >= 0) {
                    document.querySelector(`.dropdown-content a:nth-child(${newIndex + 1})`).click();
                }
            };

            // Functionality for the next chapter button
            nextButton.onclick = () => {
                let newIndex = currentIndex + 1;
                while (newIndex < files.length && isDivider(newIndex)) {
                    newIndex++;
                }
                if (newIndex < files.length) {
                    document.querySelector(`.dropdown-content a:nth-child(${newIndex + 1})`).click();
                }
            };

            // Disable buttons if at the start or end of the list
            prevButton.disabled = currentIndex === 0;
            nextButton.disabled = currentIndex === files.length - 1;
        }
    </script>
</head>
<body>
    <!-- Banner section -->
    <div class="banner">
        <div class="banner-content">
            <h1>Lunar Base Project</h1>
            <div class="dropdown">
                <button class="dropbtn" aria-label="Open dropdown menu"></button>
                <div class="dropdown-content">
                    <!-- Links generated from file list will be inserted here -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Main content section -->
    <div class="content" id="content">
        <!-- Content will be loaded here -->
        <p>Select a file from the dropdown menu to display its content here.</p>
    </div>

    <!-- Footer navigation buttons -->
    <div class="footer">
        <button id="prev-chapter" disabled aria-label="Previous chapter"><<<</button>
        <button id="next-chapter" aria-label="Next chapter">>>></button>
    </div>
</body>
</html>
